name: Graviton workflow

on:
  push:
    branches: [ "graviton" ]
  workflow_dispatch:

permissions: {}

jobs:
  run-test:
    name: Run test on graviton instance
    runs-on: cp-graviton
    timeout-minutes: 10

    steps:
      - name: Checkout repository
        uses: actions/checkout@a5ac7e51b41094c92402da3b24376905380afc29 # v4.1.6

      - name: Do something
        shell: bash
        run: |
          uptime
          uname -a
          cat /proc/cpuinfo | tail -18
          free -m
          sudo apt update
          mount
          echo "*** TOOLS INFO ***"
          sccache --version
          echo "*** DISK INFO ***"
          df -h
          echo
          sudo cat /etc/fstab
          echo
          sudo ls -l /dev/disk/by-path/
          echo
          sudo ls -l /dev/disk/*
          echo
          sudo lsblk | grep disk
          sleep 180

